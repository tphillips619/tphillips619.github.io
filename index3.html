<!DOCTYPE html>
<html lang= "en">
  <head>
    <title>Mortgage Interest Rate History</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://code.jquery.com/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script> -->

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="d3/d3.v3.min.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <style> 
path {
    stroke-width: 3;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

.grid .tick {
    stroke: lightgrey;
    stroke-opacity: 0.3;
    shape-rendering: crispEdges;
}
.grid path {
    stroke-width: 0;
}

.legend {
    font-size: 14px;
    font-weight: bold;
    text-anchor: left;
}

div.tooltip {
    position: absolute;
    text-align: center;
    width: 110px;
    height: 28px;
    padding: 2px;
    font: 12px sans-serif; 
    background: lightsteelblue;
    border: 0px;
    border-radius: 8px;
    pointer-events: none;
}

    </style>
  </head>
  <body>

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
    <div class="navbar-header">
        <a class="navbar-brand" href="#">Home Price Viz</a>
    </div>
    <ul class="nav navbar-nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="index2.html">Price History</a></li>
        <li class="active"><a href="#">Interest Rate</a></li>
        <li><a href="index4.html">Forecast Change</a></li>
        <li><a href="about.html">About</a></li>
    </ul>
    </div>
</nav>
      <div id="viz2" class="container">
      </div>
       <div class="container">
          <h2>Average Interest Rate for Mortgages</h2>
          <p>One of the factors that can influence the demand and price of housing is the affordability of a mortgage that most buyers would need to purchase property.  Data on all cash purchases is harder to come by, although Zillow's researchers have collected and created a <a href="https://www.zillow.com/research/top-markets-for-cash-purchases-9696/">visualization</a> about the percentages of cash buyers in local markets.  With a few notable exceptions the interest rates for a 30-year fixed mortgage have trended towards making homes more affordable.  This <a href="https://www.freddiemac.com/pmms/docs/30-yr_historics.xls">data</a> was taken from <a href="http://www.freddiemac.com">frediemac.com</a></p>
           <ul class="pager">
               <li class="previous"><a href="index2.html">Previous</a></li>
               <li class="next"><a href="index4.html">Next</a></li>
           </ul>
      </div>
      
      <script>
var margin = {top: 40, right: 120, bottom: 70, left: 80},
    width = 800 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%Y-%m-%d").parse;

var x = d3.time.scale().range([0, width]);
var y = d3.scale.linear().range([height, 0]);

var xAxis = d3.svg.axis().scale(x)
    .orient("bottom").ticks(10);

var yAxis = d3.svg.axis().scale(y)
    .orient("left").ticks(10);


// Define the lines
var rateline = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.rate); });
var pointsline = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.points); });

// Functions to add grid lines
function make_x_axis() {
     return d3.svg.axis()
	.scale(x)
	.orient("bottom")
	.ticks(20)
}
function make_y_axis() {
    return d3.svg.axis()
	.scale(y)
	.orient("left")
	.ticks(10)
}
  
// Adds the svg canvas
var svg = d3.select("#viz2")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .attr("id", "lineChartCanvas")
    .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")"); 

// Get the data
d3.csv("data/30yrfixed.csv", function(error, data) {
    data.forEach(function(d) {
        d.date = parseDate(d.date);
        d.rate = +d.rate;
        d.points = +d.points;
    });

    // Scale the range of the data
    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([0, d3.max(data, function(d) { return Math.max(d.rate, d.points);})]);

    // Draw interest rate line
    svg.append("path")
        .attr("class","line")
        .style("stroke","steelblue") 
        .attr("d",rateline(data));

    // Draw points line
    svg.append("path")
        .attr("class","line")
        .style("stroke","red") 
        .attr("d",pointsline(data));

    // Add interest rate label
    svg.append("text")
        .attr("transform", "translate("+(width+3)+","+y(data[data.length-1].rate)+")")
        .attr("dy", ".35em")
        .attr("text-anchor", "start")
        .style("fill", "steelblue")
        .text("Interest Rate");

    // Add points label
    svg.append("text")
        .attr("transform", "translate("+(width+3)+","+y(data[data.length-1].points)+")")
        .attr("dy", ".35em")
        .attr("text-anchor", "start")
        .style("fill", "red")
        .text("Points");

    // Add the X Axis
    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    // Label X Axis 
    svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - (margin.left))
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("30-Year Fixed Interest Rate");

    // Add the Y Axis
    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis);

    // Add grid lines
    svg.append("g")
        .attr("class", "grid")
        .attr("transform", "translate(0," + height + ")")
        .call(make_x_axis()
                .tickSize(-height, 0, 0)
                .tickFormat("")
         );
    svg.append("g")
        .attr("class", "grid")
        .call(make_y_axis()
                .tickSize(-width, 0, 0)
                .tickFormat("")
        );

    // Add the chart title
    svg.append("text")
        .attr("x", (width / 2))
        .attr("y", 0 - (margin.top / 2))
        .attr("text-anchor", "middle")
        .style("font-size", "22px")
        .text("Mortgage Interest Rate");

});
</script>
</body>
</html>
