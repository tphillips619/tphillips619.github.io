<!DOCTYPE html>
<!-- Attempt at a choropleth for only California -->
<meta charset="utf-8">
<head>
    <title>Choropleth</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<style>

.states {
    fill: none;
    stroke: #fff;
    stroke-linejoin: round;
}

</style>

<!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="d3/d3.v3.min.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Home Price Viz</a>
      </div>
      <ul class="nav navbar-nav">
        <li><a href="index.html">Home</a></li>
        <li><a href="index2.html">Price History</a></li>
        <li class="active"><a href="#">Choropleth</a></li>
        <li><a href="index4.html">Interest Rate</a></li>
      </ul>
    </div>
  </nav>
  <div class="container">
    <h2>Choropleth</h2>
    <p>Visualizing trends in home prices by geographic area.</p>
    <ul class="pager">
      <li class="previous"><a href="index2.html">Previous</a></li>
      <li class="next"><a href="index4.html">Next</a></li>
    </ul>
  </div>

<script>

var width = 960,
    height = 500;

var color = d3.scale.threshold()
    .domain([0.02, 0.04, 0.06, 0.08, 0.10])
    .range(["#f2f0f7", "#dadaeb", "#bcbddc", "#9e9ac8", "#756bb1", "#54278f"]);
// https://bost.ocks.org/mike/map/

/*    
var projection = d3.geo.albers()
    .scale(100)
    .translate([width/2, height/2]);
*/

var path = d3.geo.path()//.projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

//d3.json(d3.json, "data/Californiatopo.json")


queue()
//    .defer(d3.json, "data/us.json")
    .defer(d3.json, "data/geo/Californiatopo.json")
    .defer(d3.tsv, "data/unemployment.tsv")
    .await(ready);

function ready(error, Californiatopo, unemployment) {
    if (error) throw error;

    var rateById = {};

    unemployment.forEach(function(d) { rateById[d.id] = +d.rate; });

    svg.append("g")
        .attr("class", "counties")
        .selectAll("path")
//        .data(topojson.feature(us, us.objects.counties).features)
        .data(topojson.feature(Californiatopo, Californiatopo.objects["California.geo"]).features)
        .enter().append("path")
        .attr("d", path)
//        .style("fill", function(d) { return color(rateById[d.id]); });
        .style("fill", "steelblue");

/*
    svg.append("path")
        .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a.id !== b.id; }))
        .attr("class", "states")
        .attr("d", path);
*/
}
</script>
</body>
